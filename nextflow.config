// Configuration file
manifest {
    author = 'Phelelani Mpangase'
    description = 'H3ABioNet Variant Calling Workflow'
    mainScript = 'main.nf'
}

process {
    // Standard settings
    cache = true
    executor = 'slurm'
    queue = 'batch'
    stageInMode = 'symlink'
    stageOutMode = 'rsync'
    //clusterOptions = "--nodelist=n40"
    //clusterOptions = '--exclude=n37'
 
    // Containers
    // withName:run_GenomeIndexing{
    //     container = "$baseDir/containers/h3avarcall_bwa.sif"
    // }
    withName:run_QualityChecks {
        container = "$baseDir/containers/h3avarcall_fastqc.sif"
    }
    withName:run_ReadTrimming {
        container = "$baseDir/containers/h3avarcall_trimmomatic.sif"
    }
    withName:run_ReadAlignment {
        container = "$baseDir/containers/h3avarcall_bwa.sif"
    }
    withName:run_MarkDuplicates {
        container = "$baseDir/containers/h3avarcall_gatk.sif"
    }
    withName:run_CreateRecalibrationTable {
        container = "$baseDir/containers/h3avarcall_gatk.sif"
    }
    withName:run_SamtoolsStats {
        container = "$baseDir/containers/h3avarcall_bwa.sif"
    }
}

singularity {
    enabled = true
    cacheDir = "$baseDir/containers"
    runOptions = "--bind /global:/global --cleanenv"
    autoMounts = true
}
